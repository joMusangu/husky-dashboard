<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ROS Sensor Data Poisoning Detection</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/lucide-react@latest/dist/umd/lucide-react.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
                'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
                sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;
        const { Activity, AlertTriangle, CheckCircle, Database, Upload, Play, Pause, BarChart3, Settings, Download } = lucideReact;

        const ROSPoisoningDashboard = () => {
          const [isProcessing, setIsProcessing] = useState(false);
          const [sensorData, setSensorData] = useState({
            gps: { status: 'healthy', trustScore: 1.0, lastReading: null, lat: null, lon: null, alt: null },
            imu: { status: 'healthy', trustScore: 1.0, lastReading: null, roll: null, pitch: null, yaw: null },
            odometry: { status: 'healthy', trustScore: 1.0, lastReading: null, x: null, y: null, velocity: null }
          });
          const [anomalies, setAnomalies] = useState([]);
          const [metrics, setMetrics] = useState({
            totalReadings: 0,
            anomaliesDetected: 0,
            detectionRate: 0,
            avgProcessingTime: 0,
            currentTimestamp: 0
          });
          const [trajectoryData, setTrajectoryData] = useState([]);
          const [selectedFile, setSelectedFile] = useState(null);
          const [processorId, setProcessorId] = useState(null);
          const [error, setError] = useState(null);
          const [config, setConfig] = useState({
            predictionWindow: 5
          });
          const [poisonEnabled, setPoisonEnabled] = useState(false);
          const [poisonPresets, setPoisonPresets] = useState([]);
          const [selectedPreset, setSelectedPreset] = useState('');
          const [poisonStats, setPoisonStats] = useState(null);
          const canvasRef = useRef(null);
          const statusIntervalRef = useRef(null);

          const API_BASE_URL = 'http://localhost:5000/api';

          // Fetch status from backend
          const fetchStatus = async () => {
            if (!processorId) return;

            try {
              const response = await fetch(`${API_BASE_URL}/process/${processorId}/status`);
              if (!response.ok) {
                throw new Error('Failed to fetch status');
              }
              const data = await response.json();
              
              setMetrics(data.metrics);
              setSensorData(data.sensorData);
              setTrajectoryData(data.trajectoryData);
              setAnomalies(data.anomalies);
              setIsProcessing(data.isProcessing);
              setError(data.error || null);
              if (data.poisonInjection) {
                setPoisonStats(data.poisonInjection);
              }

              // Stop polling if processing is complete
              if (!data.isProcessing) {
                if (statusIntervalRef.current) {
                  clearInterval(statusIntervalRef.current);
                  statusIntervalRef.current = null;
                }
              }
            } catch (error) {
              console.error('Error fetching status:', error);
            }
          };

          // Start processing
          const startProcessing = async () => {
            try {
              setIsProcessing(true);
              setError(null);
              setMetrics({ totalReadings: 0, anomaliesDetected: 0, detectionRate: 0, avgProcessingTime: 0, currentTimestamp: 0 });
              setAnomalies([]);
              setTrajectoryData([]);

              // Build poison configs if enabled
              let poisonConfigs = [];
              if (poisonEnabled && selectedPreset) {
                try {
                  const presetResponse = await fetch(`${API_BASE_URL}/poison/presets`);
                  const presetData = await presetResponse.json();
                  if (presetData.presets.includes(selectedPreset)) {
                    // For now, use preset name - backend will load it
                    // In a full implementation, we'd fetch the actual configs
                    poisonConfigs = [{ preset: selectedPreset }];
                  }
                } catch (e) {
                  console.error('Error loading preset:', e);
                }
              }

              const requestBody = {
                useSynthetic: !selectedFile,
                config: {
                  ...config,
                  poisonConfigs: poisonConfigs
                }
              };

              if (selectedFile) {
                // Upload file first
                const formData = new FormData();
                formData.append('file', selectedFile);
                
                const uploadResponse = await fetch(`${API_BASE_URL}/upload`, {
                  method: 'POST',
                  body: formData
                });
                
                if (!uploadResponse.ok) {
                  const errorData = await uploadResponse.json();
                  throw new Error(errorData.error || 'File upload failed');
                }
                
                const uploadData = await uploadResponse.json();
                requestBody.filePath = uploadData.filePath;
              }

              const response = await fetch(`${API_BASE_URL}/process/start`, {
                method: 'POST',
                headers: {
                  'Content-Type': 'application/json'
                },
                body: JSON.stringify(requestBody)
              });

              if (!response.ok) {
                const errorData = await response.json();
                throw new Error(errorData.error || 'Failed to start processing');
              }

              const data = await response.json();
              setProcessorId(data.processorId);

              // Start polling for status updates
              statusIntervalRef.current = setInterval(fetchStatus, 500);
            } catch (error) {
              console.error('Error starting processing:', error);
              setError(error.message);
              alert('Failed to start processing: ' + error.message);
              setIsProcessing(false);
            }
          };

          // Stop processing
          const stopProcessing = async () => {
            if (processorId) {
              try {
                await fetch(`${API_BASE_URL}/process/${processorId}/stop`, {
                  method: 'POST'
                });
              } catch (error) {
                console.error('Error stopping processing:', error);
              }
            }
            
            if (statusIntervalRef.current) {
              clearInterval(statusIntervalRef.current);
              statusIntervalRef.current = null;
            }
            
            setIsProcessing(false);
            setProcessorId(null);
          };

          // Export anomalies to CSV
          const exportAnomalies = async () => {
            if (!processorId) {
              alert('No processor active. Start processing first.');
              return;
            }

            try {
              const response = await fetch(`${API_BASE_URL}/process/${processorId}/export`);
              if (!response.ok) {
                throw new Error('Failed to export anomalies');
              }

              const blob = await response.blob();
              const url = window.URL.createObjectURL(blob);
              const a = document.createElement('a');
              a.href = url;
              a.download = 'anomalies.csv';
              document.body.appendChild(a);
              a.click();
              window.URL.revokeObjectURL(url);
              document.body.removeChild(a);
            } catch (error) {
              console.error('Error exporting anomalies:', error);
              alert('Failed to export anomalies: ' + error.message);
            }
          };

          // Cleanup on unmount
          useEffect(() => {
            return () => {
              if (statusIntervalRef.current) {
                clearInterval(statusIntervalRef.current);
              }
            };
          }, []);

          // Draw trajectory on canvas
          useEffect(() => {
            if (!canvasRef.current || trajectoryData.length === 0) return;

            const canvas = canvasRef.current;
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;

            // Clear canvas
            ctx.fillStyle = '#1e293b';
            ctx.fillRect(0, 0, width, height);

            // Draw grid
            ctx.strokeStyle = '#334155';
            ctx.lineWidth = 1;
            for (let i = 0; i < 10; i++) {
              ctx.beginPath();
              ctx.moveTo(i * width / 10, 0);
              ctx.lineTo(i * width / 10, height);
              ctx.stroke();
              ctx.beginPath();
              ctx.moveTo(0, i * height / 10);
              ctx.lineTo(width, i * height / 10);
              ctx.stroke();
            }

            if (trajectoryData.length < 2) return;

            // Calculate bounds
            const lats = trajectoryData.map(d => d.lat);
            const lons = trajectoryData.map(d => d.lon);
            const minLat = Math.min(...lats);
            const maxLat = Math.max(...lats);
            const minLon = Math.min(...lons);
            const maxLon = Math.max(...lons);

            const padding = 50;
            const scaleX = (width - 2 * padding) / (maxLon - minLon || 1);
            const scaleY = (height - 2 * padding) / (maxLat - minLat || 1);

            const toX = (lon) => padding + (lon - minLon) * scaleX;
            const toY = (lat) => height - (padding + (lat - minLat) * scaleY);

            // Draw trajectory
            ctx.strokeStyle = '#3b82f6';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(toX(trajectoryData[0].lon), toY(trajectoryData[0].lat));

            for (let i = 1; i < trajectoryData.length; i++) {
              const point = trajectoryData[i];
              ctx.lineTo(toX(point.lon), toY(point.lat));
              
              // Change color for poisoned data
              if (point.isPoisoned && !trajectoryData[i-1].isPoisoned) {
                ctx.stroke();
                ctx.strokeStyle = '#ef4444';
                ctx.beginPath();
                ctx.moveTo(toX(point.lon), toY(point.lat));
              } else if (!point.isPoisoned && trajectoryData[i-1].isPoisoned) {
                ctx.stroke();
                ctx.strokeStyle = '#3b82f6';
                ctx.beginPath();
                ctx.moveTo(toX(point.lon), toY(point.lat));
              }
            }
            ctx.stroke();

            // Draw anomaly markers
            anomalies.forEach(anomaly => {
              if (anomaly.position && anomaly.position.lat && anomaly.position.lon) {
                ctx.fillStyle = '#ef4444';
                ctx.beginPath();
                ctx.arc(toX(anomaly.position.lon), toY(anomaly.position.lat), 6, 0, 2 * Math.PI);
                ctx.fill();
                
                ctx.strokeStyle = '#fef2f2';
                ctx.lineWidth = 2;
                ctx.stroke();
              }
            });

            // Draw start point
            if (trajectoryData.length > 0) {
              ctx.fillStyle = '#10b981';
              ctx.beginPath();
              ctx.arc(toX(trajectoryData[0].lon), toY(trajectoryData[0].lat), 8, 0, 2 * Math.PI);
              ctx.fill();

              // Draw current position
              const current = trajectoryData[trajectoryData.length - 1];
              ctx.fillStyle = '#8b5cf6';
              ctx.beginPath();
              ctx.arc(toX(current.lon), toY(current.lat), 8, 0, 2 * Math.PI);
              ctx.fill();
            }

          }, [trajectoryData, anomalies]);

          const handleFileSelect = (event) => {
            const file = event.target.files[0];
            if (file) {
              setSelectedFile(file);
            }
          };

          // Load poison presets on mount
          useEffect(() => {
            fetch(`${API_BASE_URL}/poison/presets`)
              .then(res => res.json())
              .then(data => {
                setPoisonPresets(data.presets || []);
              })
              .catch(err => console.error('Error loading presets:', err));
          }, []);

          const getSensorStatusColor = (status) => {
            switch (status) {
              case 'healthy': return 'text-green-500';
              case 'warning': return 'text-yellow-500';
              case 'critical': return 'text-red-500';
              default: return 'text-gray-500';
            }
          };

          const getTrustScoreColor = (score) => {
            if (score > 0.8) return 'bg-green-500';
            if (score > 0.5) return 'bg-yellow-500';
            return 'bg-red-500';
          };

          return (
            <div className="min-h-screen bg-slate-900 text-gray-100 p-6">
              {/* Header */}
              <div className="mb-6">
                <h1 className="text-3xl font-bold text-white mb-2">ROS Sensor Data Poisoning Detection</h1>
                <p className="text-gray-400">Real-time monitoring and anomaly detection for autonomous vehicle sensors</p>
              </div>

              {/* Error Display */}
              {error && (
                <div className="mb-6 bg-red-900 border border-red-700 rounded-lg p-4">
                  <div className="flex items-center gap-2">
                    <AlertTriangle className="w-5 h-5 text-red-400" />
                    <span className="font-semibold text-red-200">Error: {error}</span>
                  </div>
                </div>
              )}

              {/* Control Panel */}
              <div className="bg-slate-800 rounded-lg p-6 mb-6 border border-slate-700">
                <div className="flex items-center gap-4 mb-4">
                  <h2 className="text-xl font-semibold flex items-center gap-2">
                    <Settings className="w-5 h-5" />
                    Control Panel
                  </h2>
                </div>
                
                <div className="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                  <div>
                    <label className="block text-sm text-gray-400 mb-2">ROS Bag File (Optional)</label>
                    <div className="flex gap-2">
                      <input
                        type="file"
                        onChange={handleFileSelect}
                        accept=".bag,.zip"
                        disabled={isProcessing}
                        className="flex-1 bg-slate-700 border border-slate-600 rounded px-3 py-2 text-sm"
                      />
                    </div>
                    {!selectedFile && (
                      <p className="text-xs text-gray-500 mt-1">Leave empty to use synthetic data. Supports ROS1 (.bag) and ROS2 (.zip)</p>
                    )}
                    {selectedFile && (
                      <p className="text-xs text-green-400 mt-1">Selected: {selectedFile.name}</p>
                    )}
                  </div>
                  
                  <div>
                    <label className="block text-sm text-gray-400 mb-2">Prediction Window (s)</label>
                    <input
                      type="number"
                      value={config.predictionWindow}
                      onChange={(e) => setConfig({...config, predictionWindow: parseFloat(e.target.value)})}
                      disabled={isProcessing}
                      className="w-full bg-slate-700 border border-slate-600 rounded px-3 py-2"
                      min="1"
                      max="10"
                      step="1"
                    />
                  </div>
                  
                </div>

                <div className="flex gap-2">
                  <button
                    onClick={isProcessing ? stopProcessing : startProcessing}
                    className={`flex-1 flex items-center justify-center gap-2 px-6 py-2 rounded font-medium ${
                      isProcessing 
                        ? 'bg-red-600 hover:bg-red-700' 
                        : 'bg-blue-600 hover:bg-blue-700'
                    }`}
                  >
                    {isProcessing ? <Pause className="w-4 h-4" /> : <Play className="w-4 h-4" />}
                    {isProcessing ? 'Stop Processing' : 'Start Analysis'}
                  </button>
                  {processorId && anomalies.length > 0 && (
                    <button
                      onClick={exportAnomalies}
                      className="flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-700 rounded font-medium"
                      title="Export anomalies to CSV"
                    >
                      <Download className="w-4 h-4" />
                      Export CSV
                    </button>
                  )}
                </div>

                {/* Poison Injection Configuration */}
                <div className="mt-4 p-4 bg-slate-700 rounded border border-slate-600">
                  <div className="flex items-center gap-2 mb-3">
                    <input
                      type="checkbox"
                      id="poisonEnabled"
                      checked={poisonEnabled}
                      onChange={(e) => setPoisonEnabled(e.target.checked)}
                      disabled={isProcessing}
                      className="w-4 h-4"
                    />
                    <label htmlFor="poisonEnabled" className="text-sm font-semibold">
                      Enable Poison Injection (for testing)
                    </label>
                  </div>
                  
                  {poisonEnabled && (
                    <div>
                      <label className="block text-sm text-gray-400 mb-2">Preset Attack Scenario</label>
                      <select
                        value={selectedPreset}
                        onChange={(e) => setSelectedPreset(e.target.value)}
                        disabled={isProcessing}
                        className="w-full bg-slate-600 border border-slate-500 rounded px-3 py-2 text-sm"
                      >
                        <option value="">Select a preset...</option>
                        {poisonPresets.map(preset => (
                          <option key={preset} value={preset}>{preset}</option>
                        ))}
                      </select>
                      {selectedPreset && (
                        <p className="text-xs text-yellow-400 mt-1">
                          ⚠ Poison injection will be applied during processing
                        </p>
                      )}
                    </div>
                  )}

                  {poisonStats && poisonStats.enabled && (
                    <div className="mt-3 p-2 bg-slate-600 rounded text-xs">
                      <div className="font-semibold mb-1">Poison Injection Stats:</div>
                      <div>Total Injections: {poisonStats.stats?.total_injections || 0}</div>
                      <div>Active Poisons: {poisonStats.stats?.active_poisons || 0}</div>
                      <div>Injected Count: {poisonStats.injectedCount || 0}</div>
                    </div>
                  )}
                </div>
              </div>

              {/* Metrics Dashboard */}
              <div className="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                <div className="bg-slate-800 rounded-lg p-4 border border-slate-700">
                  <div className="flex items-center justify-between mb-2">
                    <span className="text-gray-400 text-sm">Total Readings</span>
                    <Database className="w-5 h-5 text-blue-500" />
                  </div>
                  <div className="text-2xl font-bold">{metrics.totalReadings}</div>
                </div>

                <div className="bg-slate-800 rounded-lg p-4 border border-slate-700">
                  <div className="flex items-center justify-between mb-2">
                    <span className="text-gray-400 text-sm">Anomalies Detected</span>
                    <AlertTriangle className="w-5 h-5 text-red-500" />
                  </div>
                  <div className="text-2xl font-bold text-red-500">{metrics.anomaliesDetected}</div>
                </div>

                <div className="bg-slate-800 rounded-lg p-4 border border-slate-700">
                  <div className="flex items-center justify-between mb-2">
                    <span className="text-gray-400 text-sm">Detection Rate</span>
                    <BarChart3 className="w-5 h-5 text-yellow-500" />
                  </div>
                  <div className="text-2xl font-bold">{metrics.detectionRate.toFixed(1)}%</div>
                </div>

                <div className="bg-slate-800 rounded-lg p-4 border border-slate-700">
                  <div className="flex items-center justify-between mb-2">
                    <span className="text-gray-400 text-sm">Avg Process Time</span>
                    <Activity className="w-5 h-5 text-green-500" />
                  </div>
                  <div className="text-2xl font-bold">{metrics.avgProcessingTime.toFixed(2)}ms</div>
                </div>
              </div>

              {/* Main Content Grid */}
              <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
                {/* Trajectory Visualization */}
                <div className="lg:col-span-2 bg-slate-800 rounded-lg p-6 border border-slate-700">
                  <h3 className="text-lg font-semibold mb-4 flex items-center gap-2">
                    <Activity className="w-5 h-5" />
                    GPS Trajectory Monitor
                  </h3>
                  <canvas
                    ref={canvasRef}
                    width={800}
                    height={500}
                    className="w-full border border-slate-600 rounded"
                  />
                  <div className="mt-4 flex gap-4 text-sm">
                    <div className="flex items-center gap-2">
                      <div className="w-4 h-4 bg-green-500 rounded-full"></div>
                      <span>Start Point</span>
                    </div>
                    <div className="flex items-center gap-2">
                      <div className="w-4 h-4 bg-blue-500 rounded-full"></div>
                      <span>Normal Path</span>
                    </div>
                    <div className="flex items-center gap-2">
                      <div className="w-4 h-4 bg-red-500 rounded-full"></div>
                      <span>Poisoned Data / Anomaly</span>
                    </div>
                    <div className="flex items-center gap-2">
                      <div className="w-4 h-4 bg-purple-500 rounded-full"></div>
                      <span>Current Position</span>
                    </div>
                  </div>
                </div>

                {/* Sensor Trust Scores */}
                <div className="bg-slate-800 rounded-lg p-6 border border-slate-700">
                  <h3 className="text-lg font-semibold mb-4">Sensor Trust Scores</h3>
                  
                  {Object.entries(sensorData).map(([sensor, data]) => (
                    <div key={sensor} className="mb-6">
                      <div className="flex items-center justify-between mb-2">
                        <span className="text-sm font-medium uppercase">{sensor}</span>
                        <span className={`text-sm font-semibold ${getSensorStatusColor(data.status)}`}>
                          {data.status}
                        </span>
                      </div>
                      
                      <div className="bg-slate-700 rounded-full h-3 overflow-hidden mb-2">
                        <div
                          className={`h-full ${getTrustScoreColor(data.trustScore)} transition-all duration-300`}
                          style={{ width: `${data.trustScore * 100}%` }}
                        />
                      </div>
                      
                      <div className="flex justify-between text-xs text-gray-400 mb-1">
                        <span>Trust: {(data.trustScore * 100).toFixed(1)}%</span>
                        {data.lastReading !== null && (
                          <span>Last: {data.lastReading.toFixed(2)}s</span>
                        )}
                      </div>

                      {/* Display actual sensor values */}
                      {sensor === 'gps' && data.lat !== null && (
                        <div className="text-xs text-gray-400 space-y-0.5 mt-2">
                          <div>Lat: {data.lat.toFixed(6)}°</div>
                          <div>Lon: {data.lon.toFixed(6)}°</div>
                          {data.alt !== null && <div>Alt: {data.alt.toFixed(2)}m</div>}
                        </div>
                      )}
                      {sensor === 'imu' && data.roll !== null && (
                        <div className="text-xs text-gray-400 space-y-0.5 mt-2">
                          <div>Roll: {data.roll.toFixed(2)}°</div>
                          <div>Pitch: {data.pitch.toFixed(2)}°</div>
                          <div>Yaw: {data.yaw.toFixed(2)}°</div>
                        </div>
                      )}
                      {sensor === 'odometry' && data.x !== null && (
                        <div className="text-xs text-gray-400 space-y-0.5 mt-2">
                          <div>X: {data.x.toFixed(2)}m</div>
                          <div>Y: {data.y.toFixed(2)}m</div>
                          {data.velocity !== null && <div>Vel: {data.velocity.toFixed(2)}m/s</div>}
                        </div>
                      )}
                    </div>
                  ))}

                    <div className="mt-6 p-4 bg-slate-700 rounded border border-slate-600">
                      <h4 className="text-sm font-semibold mb-2 flex items-center gap-2">
                        <CheckCircle className="w-4 h-4 text-green-500" />
                        System Status
                      </h4>
                      <div className="text-xs text-gray-300 space-y-1">
                        <div>Current Time: {metrics.currentTimestamp.toFixed(2)}s</div>
                        <div>Processing: {isProcessing ? 'Active' : 'Idle'}</div>
                        <div>Window: {config.predictionWindow}s</div>
                      </div>
                    </div>
                </div>
              </div>

              {/* Anomaly Log */}
              <div className="mt-6 bg-slate-800 rounded-lg p-6 border border-slate-700">
                <div className="flex items-center justify-between mb-4">
                  <h3 className="text-lg font-semibold flex items-center gap-2">
                    <AlertTriangle className="w-5 h-5 text-red-500" />
                    Anomaly Detection Log
                  </h3>
                  {anomalies.length > 0 && (
                    <span className="text-sm text-gray-400">
                      {anomalies.length} anomaly{anomalies.length !== 1 ? 'ies' : ''} detected
                    </span>
                  )}
                </div>
                
                <div className="overflow-y-auto max-h-64">
                  {anomalies.length === 0 ? (
                    <div className="text-center text-gray-500 py-8">
                      No anomalies detected yet. Start processing to begin analysis.
                    </div>
                  ) : (
                    <div className="space-y-2">
                      {anomalies.slice().reverse().map((anomaly, idx) => (
                        <div
                          key={idx}
                          className="bg-slate-700 border border-slate-600 rounded p-3 hover:bg-slate-650"
                        >
                          <div className="flex items-start justify-between mb-2">
                            <div className="flex items-center gap-2">
                              <AlertTriangle className="w-4 h-4 text-red-500" />
                              <span className="font-medium text-sm">
                                Timestamp: {typeof anomaly.timestamp === 'number' ? anomaly.timestamp.toFixed(2) : anomaly.timestamp}s
                              </span>
                            </div>
                            <span className={`text-xs font-semibold px-2 py-1 rounded ${
                              anomaly.severity > 0.7 ? 'bg-red-900 text-red-200' :
                              anomaly.severity > 0.4 ? 'bg-yellow-900 text-yellow-200' :
                              'bg-blue-900 text-blue-200'
                            }`}>
                              Severity: {(anomaly.severity * 100).toFixed(0)}%
                            </span>
                          </div>
                          
                          <div className="text-xs text-gray-300 space-y-1">
                            {anomaly.position && anomaly.position.lat && (
                              <div>Position: ({anomaly.position.lat.toFixed(6)}, {anomaly.position.lon.toFixed(6)})</div>
                            )}
                            <div className="flex flex-wrap gap-1 mt-2">
                              {anomaly.reasons && anomaly.reasons.map((reason, i) => (
                                <span key={i} className="bg-slate-600 px-2 py-1 rounded text-xs">
                                  {reason}
                                </span>
                              ))}
                            </div>
                          </div>
                        </div>
                      ))}
                    </div>
                  )}
                </div>
              </div>

              {/* Footer Info */}
              <div className="mt-6 text-center text-sm text-gray-500">
                <p>Texas Tech University - Computer Science Department</p>
                <p>ROS-Based Husky UGV Sensor Data Poisoning Detection System</p>
              </div>
            </div>
          );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<ROSPoisoningDashboard />);
    </script>
</body>
</html>

